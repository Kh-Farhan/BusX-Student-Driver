{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\University\\\\FYP\\\\BusX\\\\Student\\\\Screens\\\\Stops.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { StudentContext } from \"../ContextApi\";\nimport MapView, { Marker, Polyline } from 'react-native-maps';\nimport * as Location from \"expo-location\";\nimport { Ionicons } from '@expo/vector-icons';\nimport variable from \"../localhost\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nexport function Stops(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var Sdata = useContext(StudentContext);\n\n  var _useState = useState(Sdata),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      stops = _useState4[0],\n      setStops = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      initial = _useState6[0],\n      setInitial = _useState6[1];\n\n  var _useState7 = useState({\n    latitude: 33.71398971857024,\n    longitude: 73.08249838549538\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      marker = _useState8[0],\n      setMarker = _useState8[1];\n\n  var _Dimensions$get2 = Dimensions.get('window'),\n      width = _Dimensions$get2.width,\n      height = _Dimensions$get2.height;\n\n  var SCREEN_HEIGHT = height;\n  var SCREEN_WIDTH = width;\n  var ASPECT_RATIO = width / height;\n  var LATITUDE_DELTA = 0.1922;\n  var LONGITUDE_DELTA = LATITUDE_DELTA * ASPECT_RATIO;\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      modalVisible = _useState10[0],\n      setModalVisible = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      modalText = _useState12[0],\n      setModalText = _useState12[1];\n\n  var coordinates = [{\n    latitude: 33.713996572035036,\n    longitude: 73.08284265417677\n  }, {\n    latitude: 33.714855385416364,\n    longitude: 73.08474071221934\n  }, {\n    latitude: 33.70789410582329,\n    longitude: 73.08994419772964\n  }, {\n    latitude: 33.71439131757582,\n    longitude: 73.1023467322258\n  }, {\n    latitude: 33.71274921158932,\n    longitude: 73.10354836185778\n  }, {\n    latitude: 33.71153338989628,\n    longitude: 73.1035063923923\n  }, {\n    latitude: 33.69841913110137,\n    longitude: 73.11039329853412\n  }, {\n    latitude: 33.68937656454934,\n    longitude: 73.11041836965084\n  }, {\n    latitude: 33.68908197295216,\n    longitude: 73.11092262494283\n  }, {\n    latitude: 33.68923373238591,\n    longitude: 73.11510687098277\n  }, {\n    latitude: 33.688260681932405,\n    longitude: 73.11874394642835\n  }, {\n    latitude: 33.687398125628306,\n    longitude: 73.13166068776665\n  }, {\n    latitude: 33.686725165218995,\n    longitude: 73.13348820426081\n  }, {\n    latitude: 33.66380578718912,\n    longitude: 73.15283229566113\n  }, {\n    latitude: 33.65581337198406,\n    longitude: 73.15398028112362\n  }, {\n    latitude: 33.654231775225476,\n    longitude: 73.15531461083755\n  }, {\n    latitude: 33.65317883787651,\n    longitude: 73.15757444118358\n  }];\n  useEffect(function () {\n    navigation.setOptions({\n      headerRight: function headerRight() {\n        return React.createElement(TouchableOpacity, {\n          onPress: function onPress() {\n            return navigation.goBack();\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 9\n          }\n        }, React.createElement(Ionicons, {\n          style: {\n            marginRight: 10,\n            marginTop: 5\n          },\n          name: \"arrow-back\",\n          size: 28,\n          color: \"black\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 5\n          }\n        }));\n      }\n    });\n    setInitial({\n      latitude: 33.68914800157013,\n      longitude: 73.11465232214398,\n      latitudeDelta: LATITUDE_DELTA,\n      longitudeDelta: LONGITUDE_DELTA\n    });\n  }, []);\n\n  var addStop = function addStop() {\n    if (stops !== undefined) {\n      fetch(\"http://\" + variable.localhost + \":5000/student/setStop\", {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id: data._id,\n          coordinates: stops\n        })\n      }).then(function (response) {\n        return response.json();\n      }).catch(function (error) {\n        return console.error(\"ErrorHere: \", error);\n      }).then(function (response) {\n        if (response.message) {\n          console.log(response.message);\n          setModalText(response.message);\n          setModalVisible(true);\n        }\n\n        if (response.Success) {\n          console.log(response.Success);\n          setModalText(response.Success);\n          setModalVisible(true);\n        }\n      });\n    } else {\n      setModalText(\"Stop Not Selected!!!\");\n      setModalVisible(true);\n    }\n  };\n\n  var view = React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisible,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.modalText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, modalText), React.createElement(TouchableOpacity, {\n    style: styles.SButton,\n    onPress: function onPress() {\n      setModalVisible(false);\n      navigation.navigate(\"Dashboard\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.ButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, \"OK\"))))), React.createElement(MapView, {\n    style: styles.map,\n    initialRegion: initial,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, coordinates.map(function (item, index) {\n    return React.createElement(Marker, {\n      key: index,\n      coordinate: {\n        latitude: item.latitude,\n        longitude: item.longitude\n      },\n      onPress: function onPress(e) {\n        return setStops(e.nativeEvent.coordinate);\n      },\n      title: \"Set This as my Stop\",\n      pinColor: \"pink\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    });\n  }), React.createElement(Polyline, {\n    coordinates: coordinates,\n    strokeColor: \"#FfC329\",\n    strokeWidth: 7,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  })), React.createElement(View, {\n    style: styles.Button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, React.createElement(Button, {\n    title: \"Set Stop \",\n    onPress: addStop,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 5\n    }\n  })));\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, initial !== undefined && marker !== undefined ? view : React.createElement(View, {\n    style: styles.ActivityIndicator,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 59\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"black\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 98\n    }\n  })));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  Button: {\n    position: 'absolute',\n    marginTop: height - 150,\n    backgroundColor: '#fff',\n    width: '70%',\n    alignSelf: 'center',\n    borderRadius: 5,\n    shadowColor: '#FfC329',\n    shadowOffset: {\n      width: 0,\n      height: 3\n    },\n    shadowOpacity: 0.5,\n    shadowRadius: 5,\n    elevation: 10\n  },\n  modalView: {\n    width: \"90%\",\n    alignSelf: \"center\",\n    marginTop: \"100%\",\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: \"#FfC329\",\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#FfC329\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5\n  },\n  SButton: {\n    alignItems: \"center\",\n    marginTop: 10,\n    backgroundColor: \"#293038\",\n    width: 100,\n    height: 30,\n    borderRadius: 6,\n    paddingTop: \"1.5%\"\n  },\n  ButtonText: {\n    color: \"#FfC329\",\n    fontWeight: \"bold\",\n    alignSelf: \"center\",\n    textTransform: \"uppercase\"\n  },\n  modalText: {\n    textAlign: 'center',\n    color: \"#293038\",\n    fontSize: 20\n  },\n  image: {\n    marginTop: \"20%\",\n    width: 200,\n    height: 200,\n    shadowColor: \"yellow\",\n    shadowOffset: {\n      height: 2\n    },\n    shadowOpacity: 0.3\n  },\n  ActivityIndicator: {\n    flex: 1,\n    justifyContent: \"center\",\n    transform: [{\n      scaleX: 2.2\n    }, {\n      scaleY: 2.2\n    }]\n  },\n  map: {\n    width: Dimensions.get('window').width,\n    height: Dimensions.get('window').height\n  }\n});","map":{"version":3,"sources":["D:/University/FYP/BusX/Student/Screens/Stops.js"],"names":["React","useState","useEffect","useContext","StudentContext","MapView","Marker","Polyline","Location","Ionicons","variable","Dimensions","get","width","height","Stops","navigation","route","Sdata","data","setData","stops","setStops","initial","setInitial","latitude","longitude","marker","setMarker","SCREEN_HEIGHT","SCREEN_WIDTH","ASPECT_RATIO","LATITUDE_DELTA","LONGITUDE_DELTA","modalVisible","setModalVisible","modalText","setModalText","coordinates","setOptions","headerRight","goBack","marginRight","marginTop","latitudeDelta","longitudeDelta","addStop","undefined","fetch","localhost","method","headers","Accept","body","JSON","stringify","id","_id","then","response","json","catch","error","console","message","log","Success","view","styles","modalView","SButton","navigate","ButtonText","map","item","index","e","nativeEvent","coordinate","Button","container","ActivityIndicator","StyleSheet","create","flex","position","backgroundColor","alignSelf","borderRadius","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","borderWidth","borderColor","padding","alignItems","paddingTop","color","fontWeight","textTransform","textAlign","fontSize","image","justifyContent","transform","scaleX","scaleY"],"mappings":"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","sourcesContent":["import React, { useState, useEffect,useContext,} from \"react\";\r\nimport { StyleSheet, Text,Image, View,Button,TouchableOpacity,Switch,ActivityIndicator,Dimensions,Modal} from 'react-native';\r\nimport{StudentContext} from \"../ContextApi\";\r\nimport MapView,{Marker,Polyline} from 'react-native-maps';\r\nimport * as Location from \"expo-location\";\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport variable from \"../localhost\";\r\nconst {width, height} = Dimensions.get('window');\r\n\r\n\r\nexport function Stops({ navigation,route }) {\r\nconst Sdata=useContext(StudentContext);\r\nconst[data,setData]=useState(Sdata);\r\nconst[stops,setStops]=useState();\r\nconst[initial,setInitial]=useState();\r\nconst[marker,setMarker]=useState({latitude:33.71398971857024, longitude:73.08249838549538})\r\nconst {width, height} = Dimensions.get('window')\r\nconst SCREEN_HEIGHT = height\r\nconst SCREEN_WIDTH = width\r\nconst ASPECT_RATIO = width / height\r\nconst LATITUDE_DELTA = 0.1922\r\nconst LONGITUDE_DELTA = LATITUDE_DELTA * ASPECT_RATIO;\r\nconst [modalVisible, setModalVisible] = useState(false);\r\nconst [modalText, setModalText] = useState();\r\nconst coordinates=[{latitude:33.713996572035036,longitude: 73.08284265417677},\r\n                   {latitude:33.714855385416364,longitude: 73.08474071221934},\r\n                   {latitude:33.70789410582329,longitude:  73.08994419772964},\r\n                   {latitude:33.71439131757582,longitude: 73.1023467322258},\r\n                   {latitude:33.71274921158932,longitude: 73.10354836185778},\r\n                   {latitude:33.71153338989628,longitude:73.1035063923923},\r\n                   {latitude:33.69841913110137,longitude:73.11039329853412},\r\n                   {latitude:33.68937656454934,longitude:73.11041836965084},\r\n                   {latitude:33.68908197295216 ,longitude:73.11092262494283},\r\n                   {latitude:33.68923373238591, longitude: 73.11510687098277},\r\n                   {latitude:33.688260681932405 ,longitude:73.11874394642835},\r\n                   {latitude:33.687398125628306, longitude:73.13166068776665},\r\n                   {latitude:33.686725165218995, longitude:73.13348820426081},\r\n                   {latitude:33.66380578718912, longitude:73.15283229566113},\r\n                   {latitude:33.65581337198406,longitude: 73.15398028112362},\r\n                   {latitude:33.654231775225476,longitude:73.15531461083755},\r\n                   {latitude:33.65317883787651 ,longitude: 73.15757444118358},]\r\nuseEffect(()=>{\r\n    navigation.setOptions({ headerRight:()=>( \r\n        <TouchableOpacity onPress={()=>navigation.goBack()}  >        \r\n    <Ionicons style={{marginRight:10,marginTop:5}}name=\"arrow-back\" size={28} color=\"black\" />\r\n    </TouchableOpacity>) });\r\n    setInitial({latitude:33.68914800157013 , longitude:73.11465232214398,latitudeDelta:LATITUDE_DELTA,longitudeDelta:LONGITUDE_DELTA});\r\n    \r\n},[]);\r\n\r\nconst addStop=()=>{\r\n    if(stops!==undefined){\r\n        fetch(`http://${variable.localhost}:5000/student/setStop`, {\r\n            method: 'POST',\r\n            headers: {\r\n              Accept: 'application/json',\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body:JSON.stringify({id:data._id,coordinates:stops})\r\n          })\r\n          .then(response => response.json())  \r\n          .catch(error=> console.error(\"ErrorHere: \",error))\r\n          .then(response=>{\r\n              if(response.message){\r\n                  console.log(response.message)\r\n                setModalText(response.message);\r\n                setModalVisible(true);\r\n              }\r\n              if(response.Success){\r\n                console.log(response.Success)\r\n                setModalText(response.Success);\r\n                setModalVisible(true);\r\n              }\r\n          });\r\n    }\r\n    else{\r\n        setModalText(\"Stop Not Selected!!!\");\r\n        setModalVisible(true);\r\n    }\r\n};\r\nconst view=(<View>\r\n    <Modal\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        visible={modalVisible}\r\n      >\r\n        <View>\r\n          <View style={styles.modalView}>\r\n            <Text style={styles.modalText}>{modalText}</Text>\r\n            <TouchableOpacity  style={styles.SButton} onPress={()=>{\r\n            setModalVisible(false);\r\n            navigation.navigate(\"Dashboard\")}}>\r\n        <Text style={styles.ButtonText} >OK</Text>\r\n        </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n\r\n    <MapView style={styles.map}\r\n    initialRegion={initial}\r\n    >\r\n    {coordinates.map((item,index)=>(\r\n        <Marker\r\n        key={index}\r\n        coordinate={{ latitude: item.latitude, longitude: item.longitude }}\r\n        onPress={e=>setStops(e.nativeEvent.coordinate)}\r\n        title=\"Set This as my Stop\"\r\n        pinColor=\"pink\"\r\n        />\r\n    ))}\r\n    <Polyline coordinates={coordinates} strokeColor=\"#FfC329\" strokeWidth={7}/>\r\n    \r\n    \r\n    </MapView>\r\n    <View style={styles.Button}>\r\n    <Button title=\"Set Stop \" onPress={addStop}></Button>\r\n    </View>\r\n    </View>)\r\n    return (\r\n        <View style={styles.container}>\r\n            {initial!==undefined&&marker!==undefined?view:<View style={styles.ActivityIndicator}><ActivityIndicator  size=\"large\" color=\"black\"/></View>}\r\n            </View>\r\n      \r\n    );\r\n  }\r\n\r\n  const styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n    }, \r\n    Button:{\r\n    position:'absolute', \r\n    marginTop: height-150, \r\n    backgroundColor: '#fff',\r\n    width: '70%',\r\n    alignSelf:'center',\r\n    borderRadius: 5,\r\n    shadowColor: '#FfC329',\r\n    shadowOffset: { width: 0, height: 3 },\r\n    shadowOpacity: 0.5,\r\n    shadowRadius: 5,\r\n    elevation: 10,\r\n    },\r\n    modalView: {\r\n        width:\"90%\",\r\n        alignSelf:\"center\",\r\n        marginTop: \"100%\",\r\n        backgroundColor: \"white\",\r\n        borderRadius: 20,\r\n        borderWidth:1,\r\n        borderColor:\"#FfC329\",\r\n        padding: 35,\r\n        alignItems: \"center\",\r\n        shadowColor: \"#FfC329\",\r\n        shadowOffset: {\r\n          width: 0,\r\n          height: 2\r\n        },\r\n        shadowOpacity: 0.25,\r\n        shadowRadius: 4,\r\n        elevation: 5\r\n      },\r\n      SButton:{\r\n        alignItems: \"center\",\r\n        marginTop:10,\r\n        backgroundColor:\"#293038\",\r\n        width:100,\r\n        height:30,\r\n        borderRadius:6,\r\n        paddingTop:\"1.5%\",\r\n      \r\n      },\r\n      ButtonText:{\r\n        color: \"#FfC329\",\r\n        fontWeight: \"bold\",\r\n        alignSelf: \"center\",\r\n        textTransform: \"uppercase\"\r\n      },\r\n      modalText:{\r\n        textAlign: 'center',\r\n      color:\"#293038\",\r\n      fontSize:20\r\n      },\r\n    image: {\r\n        marginTop:\"20%\",\r\n        width: 200,\r\n        height: 200,\r\n        shadowColor: \"yellow\",\r\n      shadowOffset: { height: 2},\r\n      shadowOpacity: 0.3,\r\n      },\r\n      ActivityIndicator:{\r\n        flex: 1,\r\n        justifyContent: \"center\",\r\n        transform: [{ scaleX: 2.2 }, { scaleY: 2.2 }]\r\n      },\r\n      map: {\r\n        width: Dimensions.get('window').width,\r\n        height: Dimensions.get('window').height,\r\n      },\r\n    \r\n  });"]},"metadata":{},"sourceType":"module"}