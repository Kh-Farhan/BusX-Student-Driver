{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\University\\\\FYP\\\\BusX\\\\Student\\\\Screens\\\\Route.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { StudentContext } from \"../ContextApi\";\nimport variable from \"../localhost\";\nexport function Route(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var Sdata = useContext(StudentContext);\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(\" \"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentRoute = _useState4[0],\n      setCurrentRoute = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      routes = _useState6[0],\n      setRoutes = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      modalVisible = _useState8[0],\n      setModalVisible = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      modalText = _useState10[0],\n      setModalText = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      loader = _useState12[0],\n      setLoader = _useState12[1];\n\n  useEffect(function () {\n    var getData = function getData() {\n      return _regeneratorRuntime.async(function getData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(fetch(\"http://\" + variable.localhost + \":5000/student/getData/\" + Sdata._id, {\n                method: 'GET',\n                headers: {\n                  Accept: 'application/json',\n                  'Content-Type': 'application/json'\n                }\n              }).then(function (response) {\n                return response.json();\n              }).catch(function (error) {\n                return console.error(\"Error: \", error);\n              }).then(function (response) {\n                if (response.message) {\n                  console.log(response.message);\n                }\n\n                if (response.data) {\n                  if (response.data.route !== null) {\n                    setData(response.data);\n                    setCurrentRoute(response.data.route.routeName);\n                  } else {\n                    setData(response.data);\n                    setCurrentRoute(\"Not Selected yet\");\n                  }\n                }\n              }));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    getData();\n    fetch(\"http://\" + variable.localhost + \":5000/student/viewRoute\", {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      return response.json();\n    }).catch(function (error) {\n      return console.error(\"Error: \", error);\n    }).then(function (response) {\n      if (response.message) {}\n\n      if (response.routes) {\n        setRoutes(response.routes);\n      }\n    });\n  }, []);\n\n  var onChange = function onChange(obj) {\n    return _regeneratorRuntime.async(function onChange$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoader(true);\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(fetch(\"http://\" + variable.localhost + \":5000/student/changeRoute\", {\n              method: 'POST',\n              headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(obj)\n            }).then(function (response) {\n              return response.json();\n            }).catch(function (error) {\n              return console.error(\"Error: \", error);\n            }).then(function (response) {\n              if (response.Errormessage) {\n                setLoader(false);\n                setModalText(response.Successmessage);\n                setModalVisible(true);\n              }\n\n              if (response.Successmessage) {\n                setLoader(false);\n                setModalText(response.Successmessage);\n                setModalVisible(true);\n                setCurrentRoute(obj.name);\n              }\n            }));\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var view = React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 14\n    }\n  }, React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisible,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 6\n    }\n  }, React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.modalText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, modalText), React.createElement(TouchableOpacity, {\n    style: styles.SButton,\n    onPress: function onPress() {\n      setModalVisible(false);\n      navigation.navigate(\"Dashboard\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.ButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, \"OK\"))))), React.createElement(View, {\n    style: styles.list,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 6\n    }\n  }, React.createElement(Text, {\n    style: styles.current,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 6\n    }\n  }, \" \", currentRoute === \" \" ? React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 56\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 62\n    }\n  })) : \"Current Route: \" + currentRoute), React.createElement(FlatList, {\n    style: {\n      backgroundColor: \"white\",\n      borderBottomLeftRadius: 30,\n      borderBottomRightRadius: 30\n    },\n    keyExtractor: function keyExtractor(item, index) {\n      return 'key' + index;\n    },\n    data: routes,\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(TouchableOpacity, {\n        style: styles.routeContainer,\n        onPress: function onPress() {\n          onChange({\n            route: item._id,\n            bus: item.bus,\n            name: item.name,\n            user: Sdata._id,\n            current: data.bus,\n            isRoute: Sdata.route\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.routT,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }\n      }, item.number), React.createElement(Text, {\n        style: styles.routT,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }\n      }, item.name));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 6\n    }\n  })), React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.SButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: styles.ButtonText,\n    onPress: function onPress() {\n      navigation.navigate(\"Dashboard\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, \"Cancel\"))));\n  return React.createElement(View, {\n    style: loader ? {\n      flex: 1,\n      backgroundColor: \"white\"\n    } : {\n      flex: 1,\n      backgroundColor: \"#FfC329\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, routes !== undefined && loader === false ? view : React.createElement(View, {\n    style: {\n      marginLeft: 22,\n      marginTop: \"40%\",\n      backgroundColor: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 51\n    }\n  }, React.createElement(Image, {\n    source: require(\"../assets/Earth.gif\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 121\n    }\n  })));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#FfC329\"\n  },\n  text: {\n    textAlign: 'center',\n    color: \"black\",\n    fontSize: 30\n  },\n  routeContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    backgroundColor: \"white\",\n    justifyContent: \"space-between\",\n    borderBottomWidth: 1,\n    borderBottomColor: \"#FfC329\",\n    padding: \"4%\",\n    marginVertical: \"1%\",\n    marginHorizontal: \"1%\",\n    width: \"98%\",\n    borderRadius: 10\n  },\n  modalView: {\n    width: \"90%\",\n    alignSelf: \"center\",\n    marginTop: \"100%\",\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: \"#FfC329\",\n    padding: 35,\n    alignItems: \"center\",\n    shadowColor: \"#FfC329\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5\n  },\n  modalText: {\n    textAlign: 'center',\n    color: \"#293038\",\n    fontSize: 20\n  },\n  routT: {\n    color: \"#293038\",\n    fontSize: 16,\n    fontWeight: \"bold\"\n  },\n  current: {\n    textAlign: 'center',\n    backgroundColor: \"#293038\",\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    color: \"white\",\n    marginTop: 3,\n    fontSize: 20\n  },\n  SButton: {\n    alignItems: \"center\",\n    marginTop: 10,\n    backgroundColor: \"#293038\",\n    width: 100,\n    height: 30,\n    borderRadius: 6,\n    paddingTop: \"1.5%\"\n  },\n  ButtonText: {\n    color: \"#FfC329\",\n    fontWeight: \"bold\",\n    alignSelf: \"center\",\n    textTransform: \"uppercase\"\n  },\n  list: {\n    height: \"93%\",\n    borderBottomLeftRadius: 30\n  }\n});","map":{"version":3,"sources":["D:/University/FYP/BusX/Student/Screens/Route.js"],"names":["React","useState","useEffect","useContext","StudentContext","variable","Route","navigation","route","Sdata","data","setData","currentRoute","setCurrentRoute","routes","setRoutes","modalVisible","setModalVisible","modalText","setModalText","loader","setLoader","getData","fetch","localhost","_id","method","headers","Accept","then","response","json","catch","error","console","message","log","routeName","onChange","obj","body","JSON","stringify","Errormessage","Successmessage","name","view","styles","modalView","SButton","navigate","ButtonText","list","current","backgroundColor","borderBottomLeftRadius","borderBottomRightRadius","item","index","routeContainer","bus","user","isRoute","routT","number","flexDirection","justifyContent","flex","undefined","marginLeft","marginTop","require","StyleSheet","create","container","text","textAlign","color","fontSize","alignItems","borderBottomWidth","borderBottomColor","padding","marginVertical","marginHorizontal","width","borderRadius","alignSelf","borderWidth","borderColor","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","fontWeight","borderTopLeftRadius","borderTopRightRadius","paddingTop","textTransform"],"mappings":"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","sourcesContent":["import React, { useState, useEffect,useContext} from \"react\";\r\nimport { StyleSheet, Text,Image, View,Button,FlatList,TouchableOpacity,Modal,Pressable,ActivityIndicator} from 'react-native';\r\nimport{StudentContext} from \"../ContextApi\";\r\nimport variable from \"../localhost\";\r\nexport function Route({ navigation,route }) {\r\nconst Sdata=useContext(StudentContext);\r\nconst[data,setData]=useState();\r\nconst[currentRoute,setCurrentRoute]=useState(\" \");\r\nconst[routes,setRoutes]=useState({});\r\nconst [modalVisible, setModalVisible] = useState(false);\r\nconst [modalText, setModalText] = useState();\r\nconst [loader, setLoader] = useState(false);\r\nuseEffect(()=>{\r\n    const getData=async ()=>{\r\n        await fetch(`http://${variable.localhost}:5000/student/getData/${Sdata._id}`, {\r\n            method: 'GET',\r\n            headers: {\r\n              Accept: 'application/json',\r\n              'Content-Type': 'application/json'\r\n            }\r\n          })\r\n          .then(response => response.json())  \r\n          .catch(error=> console.error(\"Error: \",error))\r\n          .then(response=>{\r\n              if(response.message){\r\n                  console.log(response.message);\r\n              }\r\n              if(response.data){\r\n                if(response.data.route!==null){\r\n               setData(response.data)\r\n               setCurrentRoute(response.data.route.routeName);\r\n                }else{\r\n                  setData(response.data);\r\n                  setCurrentRoute(\"Not Selected yet\");\r\n                }\r\n              }\r\n              \r\n          });\r\n    };\r\n    getData();\r\n     \r\n    fetch(`http://${variable.localhost}:5000/student/viewRoute`, {\r\n    method: 'GET',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json'\r\n    }\r\n  })\r\n  .then(response => response.json())  \r\n  .catch(error=> console.error(\"Error: \",error))\r\n  .then(response=>{\r\n      if(response.message){\r\n      }\r\n      if(response.routes){\r\n        setRoutes(response.routes);\r\n      }\r\n      \r\n  });\r\n},[])\r\n\r\nconst onChange=async(obj)=>{\r\n    setLoader(true);\r\n    await fetch(`http://${variable.localhost}:5000/student/changeRoute`, {\r\n    method: 'POST',\r\n    headers: {\r\n      Accept: 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body:JSON.stringify(obj)\r\n  })\r\n  .then(response => response.json())  \r\n  .catch(error=> console.error(\"Error: \",error))\r\n  .then(response=>{\r\n      if(response.Errormessage){\r\n        setLoader(false);\r\n        setModalText(response.Successmessage);\r\n        setModalVisible(true);\r\n    }\r\n      if(response.Successmessage){\r\n        setLoader(false);\r\n        setModalText(response.Successmessage);\r\n        setModalVisible(true);\r\n        setCurrentRoute(obj.name);\r\n      }\r\n      \r\n  })\r\n};\r\n const view=(<View>\r\n     <Modal\r\n        animationType=\"slide\"\r\n        transparent={true}\r\n        visible={modalVisible}\r\n      >\r\n        <View>\r\n          <View style={styles.modalView}>\r\n            <Text style={styles.modalText}>{modalText}</Text>\r\n            <TouchableOpacity  style={styles.SButton} onPress={()=>{\r\n            setModalVisible(false);\r\n            navigation.navigate(\"Dashboard\")}}>\r\n        <Text style={styles.ButtonText} >OK</Text>\r\n        </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n    \r\n     <View style={styles.list}>\r\n     <Text style={styles.current}> {currentRoute===\" \"?<View><ActivityIndicator  size=\"small\" color=\"white\" /></View>:`Current Route: ${currentRoute}`}</Text>\r\n    {<FlatList style={{backgroundColor:\"white\",borderBottomLeftRadius:30,borderBottomRightRadius:30,}}\r\n          keyExtractor={(item, index) => 'key'+index}\r\n          data={routes}\r\n          renderItem={({ item }) => (\r\n          <TouchableOpacity \r\n          style={styles.routeContainer}\r\n         onPress={()=>{\r\n            onChange({route:item._id,bus:item.bus,name:item.name,user:Sdata._id,current:data.bus,isRoute:Sdata.route});\r\n         }} >\r\n          <Text style={styles.routT} >{item.number}</Text>\r\n          <Text style={styles.routT}>{item.name}</Text>\r\n          </TouchableOpacity>\r\n        )}\r\n      />}\r\n      </View>\r\n      <View style={{flexDirection:\"row\",justifyContent:\"center\"}}>\r\n        <TouchableOpacity  style={styles.SButton}>\r\n        <Text style={styles.ButtonText} onPress={()=>{navigation.navigate(\"Dashboard\")}}>Cancel</Text>\r\n        </TouchableOpacity>\r\n        </View>\r\n        </View>);\r\n\r\n\r\n    return (\r\n      <View style={loader?{flex: 1,backgroundColor:\"white\"}:{ flex: 1,backgroundColor:\"#FfC329\"}}>\r\n       {routes!==undefined && loader===false?view:<View style={{marginLeft:22,marginTop:\"40%\",backgroundColor:\"white\"}}><Image source={require('../assets/Earth.gif')} /></View>}\r\n      </View>\r\n    );\r\n  }\r\n  const styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      backgroundColor:\"#FfC329\"\r\n    }, \r\n    text:{\r\n      textAlign: 'center',\r\n      color:\"black\",\r\n      fontSize:30\r\n    },\r\n    routeContainer:{\r\n        flexDirection:\"row\",\r\n        alignItems: \"center\",\r\n        backgroundColor:\"white\",\r\n      justifyContent: \"space-between\",\r\n      borderBottomWidth:1,\r\n      borderBottomColor:\"#FfC329\",\r\n      padding:\"4%\",\r\n      marginVertical:\"1%\",\r\n      marginHorizontal:\"1%\",\r\n      width:\"98%\",\r\n      borderRadius:10,\r\n    },\r\n    modalView: {\r\n        width:\"90%\",\r\n        alignSelf:\"center\",\r\n        marginTop: \"100%\",\r\n        backgroundColor: \"white\",\r\n        borderRadius: 20,\r\n        borderWidth:1,\r\n        borderColor:\"#FfC329\",\r\n        padding: 35,\r\n        alignItems: \"center\",\r\n        shadowColor: \"#FfC329\",\r\n        shadowOffset: {\r\n          width: 0,\r\n          height: 2\r\n        },\r\n        shadowOpacity: 0.25,\r\n        shadowRadius: 4,\r\n        elevation: 5\r\n      },\r\n      modalText:{\r\n        textAlign: 'center',\r\n      color:\"#293038\",\r\n      fontSize:20\r\n      },\r\n    routT:{\r\n        color:\"#293038\",\r\n        fontSize:16,\r\n        fontWeight:\"bold\"\r\n    },\r\n    current:{\r\n      textAlign: 'center',\r\n      backgroundColor:\"#293038\",\r\n      borderTopLeftRadius:20,\r\n      borderTopRightRadius:20,\r\n      color:\"white\",\r\n      marginTop:3,\r\n      fontSize:20\r\n    },\r\n    SButton:{\r\n        alignItems: \"center\",\r\n        marginTop:10,\r\n        backgroundColor:\"#293038\",\r\n        width:100,\r\n        height:30,\r\n        borderRadius:6,\r\n        paddingTop:\"1.5%\",\r\n      \r\n      },\r\n      ButtonText:{\r\n        color: \"#FfC329\",\r\n        fontWeight: \"bold\",\r\n        alignSelf: \"center\",\r\n        textTransform: \"uppercase\"\r\n      },\r\n      list:{\r\n          height:\"93%\",\r\n          borderBottomLeftRadius:30,\r\n\r\n      }\r\n    \r\n  });"]},"metadata":{},"sourceType":"module"}